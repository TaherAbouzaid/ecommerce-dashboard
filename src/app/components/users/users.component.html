<p-toast></p-toast>
<p-confirmDialog></p-confirmDialog>
<p-table
  [value]="users"
  responsiveLayout="scroll"
  class="shadow-xl rounded-xl border border-gray-200 overflow-hidden"
  [tableStyle]="{ 'min-width': '1200px' }"
  editMode="cell"
>
  <ng-template pTemplate="header">
    <tr class="bg-gray-200 text-gray-800 text-sm font-semibold">
      <th class="p-4 text-left">Select</th>
      <th class="p-4 text-left">Profile</th>
      <th class="p-4 text-left">Full Name</th>
      <th class="p-4 text-left">Email</th>
      <th class="p-4 text-left">Phone</th>
      <th class="p-4 text-left">Role</th>
      <th class="p-4 text-left">Address</th>
      <th class="p-4 text-center">Wishlist Count</th>
      <!-- <th class="p-4 text-center">Edit</th> -->
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-user>
    <tr class="hover:bg-gray-50 transition duration-300 text-sm text-gray-700">
      <td class="p-4">
        <input type="checkbox" [(ngModel)]="user.selected" class="checkbox"/>
      </td>

      <td class="p-4 flex items-center justify-start">
        <div class="image-container">
          <img
            [src]="user.profileimage || 'assets/default-avatar.png'"
            alt="User Avatar"
            class="rounded-full w-10 h-10 object-cover"
          />
        </div>
      </td>

      <!-- <td class="p-4">{{ user.name }}</td> -->

      <td class="p-4" pEditableColumn>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input [(ngModel)]="user.name" class="p-inputtext p-component" />
          </ng-template>
          <ng-template pTemplate="output">
            {{ user.name }}
          </ng-template>
        </p-cellEditor>
      </td>


      <!-- <td class="p-4">{{ user.email }}</td> -->

      <td class="p-4" pEditableColumn>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input [(ngModel)]="user.email" class="p-inputtext p-component" />
          </ng-template>
          <ng-template pTemplate="output">
            {{ user.email }}
          </ng-template>
        </p-cellEditor>
      </td>


      <!-- <td class="p-4">{{ user.phone || "N/A" }}</td> -->

      <td class="p-4" pEditableColumn>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <input [(ngModel)]="user.phone" class="p-inputtext p-component" />
          </ng-template>
          <ng-template pTemplate="output">
            {{ user.phone }}
          </ng-template>
        </p-cellEditor>
      </td>


      <!-- <td class="p-4">
        <select class="border rounded px-2 py-1 text-sm capitalize" [(ngModel)]="user.role">
          <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
        </select>
      </td> -->

      <td class="p-4" pEditableColumn>
        <p-cellEditor>
          <ng-template pTemplate="input">
            <select class="border rounded px-2 py-1 text-sm capitalize" [(ngModel)]="user.role">
              <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
            </select>
          </ng-template>
          <ng-template pTemplate="output">
            {{ user.role }}
          </ng-template>
        </p-cellEditor>
      </td>


      <td class="p-4">
        <ul class="list-disc list-inside space-y-1">
          <li *ngFor="let address of user.address">{{ address }}</li>
        </ul>
      </td>

      <td class="p-4 text-center font-bold text-indigo-600">
        {{ user.wishlist.length }}
      </td>
      <!-- <td class="p-4 text-center">
        <p-button label="Edit" (click)="editUser(user)"></p-button>
      </td> -->


    </tr>
  </ng-template>
</p-table>

<div class="mt-6 flex justify-end gap-4">
  <button
    class="bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-2 rounded-lg"
    (click)="saveChanges()"
  >
    Save All Changes
  </button>

  <button
  class="bg-red-600 hover:bg-red-700 text-white font-semibold px-6 py-2 rounded-lg"
  (click)="confirmDeleteSelected()"
>
  Delete Selected
</button>

</div>
