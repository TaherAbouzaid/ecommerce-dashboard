<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6 bg-gray-100">
  <div *ngFor="let item of postsWithCommentsAndReplies" class="bg-white shadow-lg rounded-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
    <!-- Post Content -->
    <div class="p-6">
      <h3 class="text-xl font-bold text-gray-800 mb-3">{{ item.post.title }}</h3>
      <p class="text-sm text-gray-600 mb-2">👁️ Views: <span class="font-medium">{{ item.post.views }}</span></p>
      <p class="text-sm text-gray-600 mb-2">❤️ Likes: <span class="font-medium">{{ item.post.likesCount }}</span></p>
      
      <p class="text-sm text-gray-600 mb-2">🗓️ Created At: <span class="font-medium">{{ item.post.createdAt.toDate()| date:'short' }}</span></p>
      <p class="text-sm text-gray-700">{{ item.post.content }}</p>
    </div>

    <!-- Comments Section -->
    <div class="border-t border-gray-200 p-6 bg-gray-50">
      <div *ngIf="item.comments.length > 0">
        <h4 class="text-lg font-semibold text-gray-700 mb-4">💬 التعليقات:</h4>
        <div *ngFor="let comment of item.comments" class="mb-4 p-4 bg-white rounded-md shadow-sm">
          <p class="text-sm text-gray-800"><strong>تعليق:</strong> {{ comment.comment.content }}</p>
          <div *ngIf="comment.replies.length > 0" class="mt-3 pl-4 border-l-2 border-gray-300">
            <h5 class="text-sm font-medium text-gray-600 mb-2">↪️ الردود:</h5>
            <div *ngFor="let reply of comment.replies" class="text-sm text-gray-700">
              <span>↳ {{ reply.content }}</span>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="item.comments.length === 0" class="text-center text-gray-500">
        <p>no comments</p>
      </div>
    </div>
  </div>
</div>
<p-button label=" add post" (onClick)="createPost()" icon="pi pi-plus" class="mb-3" />

<div *ngFor="let item of postsWithCommentsAndReplies" class="mb-4">
  <p-card header="{{ item.post.title }}" subheader="Post ID: {{ item.post.postId }}">
    <p>{{ item.post.content }}</p>
    <small>Views: {{ item.post.views }} | Likes: {{ item.post.likesCount }}</small>

    <div class="mt-2">
      <p-button label="edit" (onClick)="updatePost(item.post.postId)" icon="pi pi-pencil" class="mr-2" />
      <p-button label="delete" (onClick)="deletePost(item.post.postId)" icon="pi pi-trash" severity="danger" />
    </div>

    <div *ngIf="item.comments.length > 0" class="mt-3">
      <h4>comments:</h4>
      <div *ngFor="let c of item.comments" class="mb-2 border p-2 rounded bg-gray-100">
        <strong>comment:</strong> {{ c.comment.content }}
        <div *ngIf="c.replies.length > 0" class="ml-4 mt-1 bg-white border rounded p-2">
          <h5 class="text-sm text-gray-600">الردود:</h5>
          <div *ngFor="let r of c.replies" class="pl-2 mt-1">
            <span>↳ {{ r.content }}</span>
          </div>
        </div>
      </div>
    </div>
  </p-card>
</div>
